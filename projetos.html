<!doctype html>
<html lang="pt-BR">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Projetos – Portfólio da Ge</title>
  <link rel="stylesheet" href="projetos.css" />
</head>
 
<body>

  <!-- ================= GALERIA ================= -->
  <body>

  <!-- ================= GALERIA ================= -->
  <section class="galeria">
    <div class="container-galeria">

      <!-- CARD 1 -->
      <article class="card" tabindex="0"
        data-title="Stand de vendas | Epadoca"
        data-subtitle="Identidade visual e presença estratégica da marca"
        data-img="imagens/imgprojetos/Stand Epadoca.jpg"
        data-desc="<p>xxxxxxxxx..</p>">

        <img src="Imagens/imgprojetos/Stand Epadoca.jpg" alt="Imagem do Projeto">
        <div class="info-card">
          <h3>Stand de vendas | Epadoca</h3>
          <p>Identidade visual e presença estratégica da marca</p>
          <a href="#" class="btn-detalhes open-modal">Ver detalhes</a>
        </div>
      </article>

      <!-- CARD 2 -->
      <article class="card" tabindex="0"
        data-title="Título do Projeto"
        data-subtitle="Categoria"
        data-img="imagens/projeto2.jpg"
        data-desc="<p>Outro projeto com informações detalhadas...</p>">

        <img src="imagens/projeto2.jpg" alt="Imagem do Projeto">
        <div class="info-card">
          <h3>Título do Projeto</h3>
          <p>Categoria</p>
          <a href="#" class="btn-detalhes open-modal">Ver detalhes</a>
        </div>
      </article>

      <!-- CARD 3 -->
      <article class="card" tabindex="0"
        data-title="Título do Projeto"
        data-subtitle="Categoria"
        data-img="imagens/projeto3.jpg"
        data-desc="<p>Descrição com texto, imagens, anexos, etc...</p>">

        <img src="imagens/projeto3.jpg" alt="Imagem do Projeto">
        <div class="info-card">
          <h3>Título do Projeto</h3>
          <p>Categoria</p>
          <a href="#" class="btn-detalhes open-modal">Ver detalhes</a>
        </div>
      </article>

    </div>
  </section>

  <!-- ================= MODAL ================= -->
  <div class="modal-overlay" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modal-title">

      <button class="close-modal" aria-label="Fechar modal">&times;</button>

      <div class="modal-content">

        <div class="modal-image">
          <img src="" alt="" id="modal-img">
        </div>

        <div class="modal-info">
          <h2 id="modal-title"></h2>
          <p class="modal-sub" id="modal-sub"></p>
          <div class="modal-desc" id="modal-desc"></div>

          <div class="modal-actions">
            <button class="btn-detalhes close-modal">Fechar</button>
          </div>
        </div>

      </div>
    </div>
  </div>

  <script>
(function(){
  // Seletores do modal (certifique-se que existam estes elementos no DOM)
  const overlay = document.querySelector('.modal-overlay');
  const modalBox = document.querySelector('.modal');
  const modalImg = document.getElementById('modal-img');
  const modalTitle = document.getElementById('modal-title');
  const modalSub = document.getElementById('modal-sub');
  const modalDesc = document.getElementById('modal-desc');

  if (!overlay || !modalBox) {
    console.warn('Modal não encontrado: verifique se .modal-overlay e .modal existem no DOM.');
    return;
  }

  // Abre o modal a partir de um elemento <article class="card">
  function openModalFromCard(card) {
    const title = card.dataset.title || '';
    const subtitle = card.dataset.subtitle || '';
    const desc = card.dataset.desc || '';
    const img = card.dataset.img || '';

    modalTitle.textContent = title;
    modalSub.textContent = subtitle;
    // data-desc já pode conter HTML (ex: <p>...), então inserimos direto
    modalDesc.innerHTML = desc;
    if (modalImg) {
      modalImg.src = img || '';
      modalImg.alt = title || 'Imagem do projeto';
    }

    overlay.classList.add('active');
    overlay.setAttribute('aria-hidden', 'false');
    document.body.style.overflow = 'hidden';

    // foco para acessibilidade
    const focusable = modalBox.querySelectorAll('button, a[href], input, textarea, select');
    if (focusable.length) focusable[0].focus();
  }

  function closeModal() {
    overlay.classList.remove('active');
    overlay.setAttribute('aria-hidden', 'true');
    document.body.style.overflow = '';
  }

  // Ligar aos botões .open-modal (dentro do card)
  document.querySelectorAll('.open-modal').forEach(btn => {
    btn.addEventListener('click', function(e){
      e.preventDefault();
      const card = btn.closest('.card');
      if (card) openModalFromCard(card);
    });
  });

  // Também abrir clicando no card (exceto quando o clique for em link ou botão)
  document.querySelectorAll('.card').forEach(card => {
    card.addEventListener('click', function(e){
      if (e.target.closest('a') || e.target.closest('button')) return;
      openModalFromCard(card);
    });

    // abrir por teclado (Enter/Space)
    card.addEventListener('keydown', function(e){
      if (e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        openModalFromCard(card);
      }
    });
  });

  // fechar via botão(s) com classe .close-modal
  document.querySelectorAll('.close-modal').forEach(btn => {
    btn.addEventListener('click', function(e){
      e.preventDefault();
      closeModal();
    });
  });

  // fechar clicando no overlay fora da caixa
  overlay.addEventListener('click', function(e){
    if (e.target === overlay) closeModal();
  });

  // fechar com ESC
  document.addEventListener('keydown', function(e){
    if (e.key === 'Escape' && overlay.classList.contains('active')) {
      closeModal();
    }
  });

  // expor função global se quiser abrir por código: window.openModalFromCard(cardElement)
  window.openModalFromCard = openModalFromCard;
})();
 </script>
 
</body>
