<!doctype html>
<html lang="pt-BR">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Projetos – Portfólio da Ge</title>
  <link rel="stylesheet" href="projetos.css" />
</head>
 
<body>

  <!-- ================= GALERIA ================= -->
  <section class="galeria">
    <div class="container-galeria">

      <!-- CARD 1 -->
      <article class="card" tabindex="0" data-title="Stand de vendas | Epadoca" data-subtitle="Identidade visual e a presença estratégica da marca"
        data-img="Imagens/imgprojetos/Stand Epadoca.jpg"
        data-desc="<p>Descrição longa com imagens e texto formatado.</p>" data-pdfs="arquivos/manual.pdf"
        data-links="https://meuprojeto.com">

        <img src="imagens/imgprojetos/Stand Epadoca.jpg" alt="Imagem do projeto">
        <h3>Stand de vendas | Epadoca</h3>
        <p>Identidade visual e a presença estratégica da marca</p>
        <a href="#" class="open-modal">Ver detalhes</a>
      </article>

      <!-- CARD 2 -->
      <article class="card" tabindex="0" data-title="Outro projeto" data-subtitle="Categoria"
        data-img="imagens/projeto3.jpg" data-desc="<p>Descrição longa com imagens</p>" data-pdfs="arquivos/manual.pdf"
        data-links="https://meuprojeto.com">

        <img src="imagens/projeto3.jpg" alt="Imagem do projeto">
        <h3>Título</h3>
        <p>Categoria</p>
        <a href="#" class="open-modal">Ver detalhes</a>
      </article>

      <!-- CARD 3 -->
      <article class="card" tabindex="0" data-title="Mais um projeto" data-subtitle="Categoria"
        data-img="imagens/projeto3.jpg" data-desc="<p>Descrição longa com imagens</p>" data-pdfs="arquivos/manual.pdf"
        data-links="https://meuprojeto.com">

        <img src="imagens/projeto3.jpg" alt="Imagem do projeto">
        <h3>Título</h3>
        <p>Categoria</p>
        <a href="#" class="open-modal">Ver detalhes</a>
      </article>

    </div> <!-- fecha .container-galeria -->
  </section>
  <!-- =============== FIM DA GALERIA =============== -->


  <!-- ================= MODAL ================= -->
  <div class="modal-overlay" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modal-title">

      <button class="close-modal" aria-label="Fechar modal">&times;</button>

      <div class="modal-content">

        <!-- Imagem destacada -->
        <div class="modal-image">
          <img src="" alt="" id="modal-img">
        </div>

        <!-- Conteúdo -->
        <div class="modal-info">
          <h2 id="modal-title">Título do Projeto</h2>
          <p class="modal-sub" id="modal-sub">Subtítulo</p>

          <div class="modal-desc" id="modal-desc">
            <p>Descrição do projeto...</p>
          </div>

          <!-- Botões -->
          <div class="modal-actions">
            <button class="btn-detalhes close-modal">Fechar</button>
          </div>

        </div>
      </div>
    </div>
  </div>
  <!-- =============== FIM MODAL =============== -->


  <!-- ================= JAVASCRIPT ================= -->
  <script>
    /* ===== Seletores ===== */
    const modalOverlay = document.querySelector('.modal-overlay');
    const modal = document.querySelector('.modal');
    const modalImg = document.getElementById('modal-img');
    const modalTitle = document.getElementById('modal-title');
    const modalSub = document.getElementById('modal-sub');
    const modalDesc = document.getElementById('modal-desc');

    const openBtns = document.querySelectorAll('.open-modal');
    const cards = document.querySelectorAll('.card');

    let lastFocusedElement = null;

    /* ===== Abrir modal ===== */
     function openModalFromCard(cardElement) {
      const title = cardElement.dataset.title || '';
      const subtitle = cardElement.dataset.subtitle || '';
      const desc = cardElement.dataset.desc || '';
      const img = cardElement.dataset.img || '';
 
      modalTitle.textContent = title;
      modalSub.textContent = subtitle;
      modalDesc.innerHTML = desc; // ✅ agora insere HTML sem <p> duplicado
      modalImg.src = img;
      modalImg.alt = title + ' — imagem';

       modalOverlay.classList.add('active');
       modalOverlay.setAttribute('aria-hidden', 'false');
      document.body.style.overflow = 'hidden';
 
      lastFocusedElement = document.activeElement;
      const focusable = modal.querySelectorAll('button, [href], input, textarea, select');
      if (focusable.length) focusable[0].focus();
    }

    /* ===== Fechar modal ===== */
    function closeModal() {
      modalOverlay.classList.remove('active');
      modalOverlay.setAttribute('aria-hidden', 'true');
      document.body.style.overflow = '';
 
      if (lastFocusedElement) lastFocusedElement.focus();
    }

    /* ===== Abrir com botão ===== */
    openBtns.forEach(btn => {
      btn.addEventListener('click', (e) => {
        e.preventDefault();
         const card = btn.closest('.card');
        if (card) openModalFromCard(card);
      });
    });

    /* ===== Abrir clicando no card inteiro ===== */
    cards.forEach(card => {
      card.addEventListener('click', (e) => {
        if (e.target.closest('a')) return;
        openModalFromCard(card);
      });
  
      card.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          openModalFromCard(card);
        }
      });
    });

    /* ===== Fechar (botão X e botão Fechar) ===== */
    document.querySelectorAll('.close-modal')
      .forEach(btn => btn.addEventListener('click', closeModal));

    /* ===== Fechar clicando fora ===== */
    modalOverlay.addEventListener('click', (e) => {
      if (e.target === modalOverlay) closeModal();
    });

    /* ===== ESC fecha ===== */
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && modalOverlay.classList.contains('active')) {
        closeModal();
      }
    });
   </script>

 </body>